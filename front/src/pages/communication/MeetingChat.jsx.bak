import { Box } from '@mui/material';
import useCommunityStore from '@stores/communication/useCommunityStore';
import fetcher from '@utils/fetcher';
import React from 'react';
import { Button, Input, MessageBox, MessageList } from 'react-chat-elements';
import useSWR from 'swr';
const MeetingChat = () => {
  const { chatRoomEntryNo, chatType, setField } = useCommunityStore();

  const { data: myData, mutate: mutateMe } = useSWR(
    `http://${import.meta.env.VITE_SPRING_HOST}/rest/user/login`,
    fetcher
  );

  const { data: meetingMessagesData, mutate: mutateMeetingMessages } = useSWR(
    `http://${
      import.meta.env.VITE_EXPRESS_HOST
    }/rest/chat/meetingno/${chatRoomEntryNo}/message/list/userno/${
      myData?.userNo
    }`,
    fetcher
  );

  console.log(meetingMessagesData);

  return (
    <Box sx={{ marginTop: '64px' }}>
      {meetingMessagesData.map((meetingMessage, i) => (
        <MessageBox
          key={i}
          position={
            meetingMessage.sender_no === myData.userNo ? 'right' : 'left'
          }
          type={'text'}
          text={meetingMessage.content}
          status={'received'}
        />
      ))}
    </Box>
  );
};

export default MeetingChat;
